import{_ as a,c as i,j as l,a as o,t as r,a3 as t,o as s}from"./chunks/framework.DgSc8i_W.js";const g=JSON.parse('{"title":"升级、更新记录","description":"","frontmatter":{"title":"升级、更新记录"},"headers":[],"relativePath":"others/changelog.md","filePath":"others/changelog.md","lastUpdated":null}'),u={name:"others/changelog.md"},n={id:"frontmatter-title",tabindex:"-1"},h=l("a",{class:"header-anchor",href:"#frontmatter-title","aria-label":'Permalink to "{{ $frontmatter.title }}"'},"​",-1),d=t('<h3 id="v0-3-4-2017-08-30" tabindex="-1">v0.3.4 2017.08.30 <a class="header-anchor" href="#v0-3-4-2017-08-30" aria-label="Permalink to &quot;v0.3.4 2017.08.30&quot;">​</a></h3><ul><li>修复默认session插件的<code>session_aes_secret</code>长度问题 <ul><li>此问题存在于OpenResty v1.11.2.5版本及可能之后的版本中</li><li>lua-resty-string v0.10开始AES salt必须是<a href="https://github.com/openresty/lua-resty-string/commit/69df3dcc2230364a54761a0d5a65327c6a4e256a" target="_blank" rel="noreferrer">8个字符</a></li></ul></li><li>使用内置的session插件时<code>session_aes_secret</code>不再是必须配置 <ul><li>若不填则默认为<code>12345678</code></li><li>若不足8个字符则以<code>0</code>补足</li><li>若超过8个字符则只使用前8个</li></ul></li></ul><h3 id="v0-3-3-2017-08-05" tabindex="-1">v0.3.3 2017.08.05 <a class="header-anchor" href="#v0-3-3-2017-08-05" aria-label="Permalink to &quot;v0.3.3 2017.08.05&quot;">​</a></h3><ul><li>使用严格的路由节点id策略,避免潜在冲突</li></ul><h3 id="v0-3-2-2017-06-10" tabindex="-1">v0.3.2 2017.06.10 <a class="header-anchor" href="#v0-3-2-2017-06-10" aria-label="Permalink to &quot;v0.3.2 2017.06.10&quot;">​</a></h3><ul><li>关于内置session插件的更改 <ul><li>修复session过期时间bug</li><li>移除lua-resty-session依赖</li><li>内置session插件替换为基于cookie的简单实现</li><li>接口仍然保持与之前版本兼容</li><li>关于session处理，仍然建议根据具体业务需求和安全考量自行实现</li></ul></li><li>支持URI中含有字符&#39;-&#39;</li></ul><h3 id="v0-3-1-2017-04-16" tabindex="-1">v0.3.1 2017.04.16 <a class="header-anchor" href="#v0-3-1-2017-04-16" aria-label="Permalink to &quot;v0.3.1 2017.04.16&quot;">​</a></h3><ul><li>支持路由中包含<code>~</code>字符（from <a href="https://github.com/XadillaX" target="_blank" rel="noreferrer">@XadillaX</a>)</li><li>支持组路由(group router)的多级路由写法</li><li>支持组路由下直接挂载中间件(see <a href="https://github.com/sumory/lor/issues/40" target="_blank" rel="noreferrer">issues#40</a>)</li></ul><h3 id="v0-3-0-2017-02-11" tabindex="-1">v0.3.0 2017.02.11 <a class="header-anchor" href="#v0-3-0-2017-02-11" aria-label="Permalink to &quot;v0.3.0 2017.02.11&quot;">​</a></h3><p>此版本为性能优化和内部实现重构版本，API使用上保持与之前版本兼容，详细描述如下：</p><p><strong>特性</strong></p><ul><li>中间件（middlewares）重构，支持任意级别、多种方式挂载中间件，这些中间件包括 <ul><li>预处理中间件(use)</li><li>错误处理中间件(erroruse)</li><li>业务处理中间件(get/post/put/delete...)</li></ul></li><li>提高路由性能 <ul><li>路由匹配次数不再随路由数增多而正比例增长</li><li>全面支持正则路由和通配符路由</li></ul></li><li>use、get/put/delete/post等API优化，如支持数组参数、支持单独挂载中间件等改进</li><li>路由匹配更加灵活: 优先匹配精确路由，其次再匹配正则路由或通配符路由</li></ul><p><strong>Break Changes</strong></p><p>与之前版本相比，break changes主要有以下几点(基本都是一些比较少用到的特性)</p><ul><li>路由执行顺序不再与路由定义顺序相关， 如错误路由不用必须定义在最下方</li><li>如果一个请求最终匹配不到已定义的任何路由，则不会执行任何中间件代码（之前的版本会执行，这浪费了一些性能）</li></ul><h3 id="v0-2-6-2016-11-26" tabindex="-1">v0.2.6 2016.11.26 <a class="header-anchor" href="#v0-2-6-2016-11-26" aria-label="Permalink to &quot;v0.2.6 2016.11.26&quot;">​</a></h3><ul><li>升级内部集成的session中间件 <ul><li>lua-resty-session升级到2.13版本</li><li>添加一个session过期参数timeout,默认为3600秒</li><li>添加一个refresh_cookie参数，用于控制否在有新请求时刷新session和cookie过期时间，默认“是”</li></ul></li><li>更新<code>lord new</code>项目模板 <ul><li>缓存<code>app</code>对象，提高性能</li><li>调整CRUD示例, 详细请参看脚手架代码中的app/routes/user.lua</li></ul></li><li>删除默认响应头X-Powered-By</li></ul><h3 id="v0-2-4-2016-11-16" tabindex="-1">v0.2.4 2016.11.16 <a class="header-anchor" href="#v0-2-4-2016-11-16" aria-label="Permalink to &quot;v0.2.4 2016.11.16&quot;">​</a></h3><ul><li>支持&quot;application/json&quot;类型请求</li></ul><h3 id="v0-2-2-2016-10-15" tabindex="-1">v0.2.2 2016.10.15 <a class="header-anchor" href="#v0-2-2-2016-10-15" aria-label="Permalink to &quot;v0.2.2 2016.10.15&quot;">​</a></h3><ul><li>支持opm， 可通过<code>opm install sumory/lor</code>安装 <ul><li>注意opm暂不支持命令安装， 所以这种方式无法安装<code>lord</code>命令</li></ul></li><li>若仍想使用<code>lord</code>命令，建议使用<code>sh install.sh</code>方式安装</li></ul><h3 id="v0-1-6-2016-10-14" tabindex="-1">v0.1.6 2016.10.14 <a class="header-anchor" href="#v0-1-6-2016-10-14" aria-label="Permalink to &quot;v0.1.6 2016.10.14&quot;">​</a></h3><ul><li><code>lord</code>工具改为使用resty-cli实现，不再依赖luajit</li></ul><h3 id="v0-1-5-2016-10-01" tabindex="-1">v0.1.5 2016.10.01 <a class="header-anchor" href="#v0-1-5-2016-10-01" aria-label="Permalink to &quot;v0.1.5 2016.10.01&quot;">​</a></h3><ul><li>Path URI支持&quot;.&quot;</li><li>使用xpcall替换pcall以记录更多出错日志</li><li>更新了测试用例</li></ul><h3 id="v0-1-4-2016-07-30" tabindex="-1">v0.1.4 2016.07.30 <a class="header-anchor" href="#v0-1-4-2016-07-30" aria-label="Permalink to &quot;v0.1.4 2016.07.30&quot;">​</a></h3><ul><li>删除一些无用代码和引用</li><li>升级测试依赖库</li><li>修改文档和注释</li><li>修改一些小bug</li></ul><h3 id="v0-1-0-2016-03-15" tabindex="-1">v0.1.0 2016.03.15 <a class="header-anchor" href="#v0-1-0-2016-03-15" aria-label="Permalink to &quot;v0.1.0 2016.03.15&quot;">​</a></h3><ul><li>增加一配置项，是否启用模板功能：app:conf(&quot;view enable&quot;, true), 默认为关闭</li><li>view.lua中ngx.var.template_root存在性判断</li><li>增加docker支持</li><li>命令<code>lord --path</code>变更为<code>lord path</code>，用于查看当前lor的安装路径</li><li>官网文档更新<a href="http://lor.sumory.com" target="_blank" rel="noreferrer">http://lor.sumory.com</a></li></ul><h3 id="v0-0-9-2016-03-02" tabindex="-1">v0.0.9 2016.03.02 <a class="header-anchor" href="#v0-0-9-2016-03-02" aria-label="Permalink to &quot;v0.0.9 2016.03.02&quot;">​</a></h3><ul><li>使用install.sh安装lor时如果有指定安装目录，则在指定的目录后面拼上&quot;lor&quot;，避免文件误删的问题</li><li>TODO: debug时列出整个路由表供参考</li></ul><h3 id="v0-0-8-2016-02-26" tabindex="-1">v0.0.8 2016.02.26 <a class="header-anchor" href="#v0-0-8-2016-02-26" aria-label="Permalink to &quot;v0.0.8 2016.02.26&quot;">​</a></h3><ul><li>支持multipart/form文件上传</li><li>修复了一个group router被多次app:use时出现404的bug</li><li>支持Response:json(data, flag)方法传入第二个bool类型参数flag，指明序列化json时默认的空table是否编码为{} <ul><li>true 作为{}处理</li><li>false 作为[]处理</li><li>不传入第二个参数则当作[]处理</li></ul></li></ul><h3 id="v0-0-7-2016-02-02" tabindex="-1">v0.0.7 2016.02.02 <a class="header-anchor" href="#v0-0-7-2016-02-02" aria-label="Permalink to &quot;v0.0.7 2016.02.02&quot;">​</a></h3><ul><li>统一代码风格</li><li>优化部分代码，比如使用ngx.re代替string对应方法、尽量使用local等</li><li>Break API: req:isFound() -&gt; req:is_found()</li><li>Fix bug: 修复了在lua_code_cache on时的一些404问题</li></ul><h3 id="v0-0-6-2016-01-30" tabindex="-1">v0.0.6 2016.01.30 <a class="header-anchor" href="#v0-0-6-2016-01-30" aria-label="Permalink to &quot;v0.0.6 2016.01.30&quot;">​</a></h3><ul><li>修改了lor的默认安装路径到/usr/local/lor</li><li>命令行工具<code>lord</code>生成的项目模板更改 <ul><li>加入了nginx.conf配置，方便之后维护自定义的nginx配置</li><li>加入start/stop/restart脚本，方便之后项目的灵活部署</li></ul></li><li>改善了路由pattern，支持path variable含有&quot;-&quot;字符</li><li>增加了几个测试用例</li><li>修复了上一个请求的path variable会污染之后请求的bug</li><li>完善了res:redirect API</li><li>修复了请求体为空时解析的bug</li><li>给lor对象添加了版本号</li><li>添加了静态文件支持（通过在nginx.conf里配置）</li><li>编写了lor框架示例项目<a href="https://github.com/lorlabs/lor-example" target="_blank" rel="noreferrer">lor-example</a></li></ul><h3 id="v0-0-5-2016-01-28" tabindex="-1">v0.0.5 2016.01.28 <a class="header-anchor" href="#v0-0-5-2016-01-28" aria-label="Permalink to &quot;v0.0.5 2016.01.28&quot;">​</a></h3><ul><li>完善了Documents和API文档，详见<a href="http://lor.sumory.com" target="_blank" rel="noreferrer">lor官网</a></li><li><code>lor new</code>命令生成的项目模板增加了一个middleware目录，用于存放自定义插件 <ul><li>该目录的命名和位置都是非强制的，用户可按需要将自定义的插件放在任何地方</li></ul></li><li>修改了lor new产生的项目模板，增加了几个基本API的使用方式</li></ul><h3 id="v0-0-4-2016-01-25" tabindex="-1">v0.0.4 2016.01.25 <a class="header-anchor" href="#v0-0-4-2016-01-25" aria-label="Permalink to &quot;v0.0.4 2016.01.25&quot;">​</a></h3><ul><li>以默认插件的形式添加cookie支持(lua-resty-cookie)</li><li>以默认插件的形式添加session支持(lua-resty-session)</li></ul><h3 id="v0-0-3-2016-01-23" tabindex="-1">v0.0.3 2016.01.23 <a class="header-anchor" href="#v0-0-3-2016-01-23" aria-label="Permalink to &quot;v0.0.3 2016.01.23&quot;">​</a></h3><ul><li>修复上版本路由bug</li><li>添加模板支持（lua-resty-template）</li><li>完善了40余个常规测试用例</li><li>完善了命令行工具<code>lord</code></li><li>常规API使用方法添加到默认项目模板</li></ul><h3 id="v0-0-2-2016-01-21" tabindex="-1">v0.0.2 2016.01.21 <a class="header-anchor" href="#v0-0-2-2016-01-21" aria-label="Permalink to &quot;v0.0.2 2016.01.21&quot;">​</a></h3><ul><li>完全重构v0.0.1路由</li><li>Sinatra风格路由</li><li>主要API设计完成并实现</li></ul><h3 id="v0-0-1-2016-01-15" tabindex="-1">v0.0.1 2016.01.15 <a class="header-anchor" href="#v0-0-1-2016-01-15" aria-label="Permalink to &quot;v0.0.1 2016.01.15&quot;">​</a></h3><ul><li>原型设计和实验</li></ul>',47);function c(e,v,b,m,p,f){return s(),i("div",null,[l("h1",n,[o(r(e.$frontmatter.title)+" ",1),h]),d])}const _=a(u,[["render",c]]);export{g as __pageData,_ as default};
